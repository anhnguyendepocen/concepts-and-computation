<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Location and Scale in R | Concepts and Computation: An Introduction to Political Methodology</title>
  <meta name="description" content="These are my notes for my class introducing the fundamental conceptual and computational tools to first-year PhD students in politial science." />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Location and Scale in R | Concepts and Computation: An Introduction to Political Methodology" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are my notes for my class introducing the fundamental conceptual and computational tools to first-year PhD students in politial science." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Location and Scale in R | Concepts and Computation: An Introduction to Political Methodology" />
  
  <meta name="twitter:description" content="These are my notes for my class introducing the fundamental conceptual and computational tools to first-year PhD students in politial science." />
  

<meta name="author" content="Carlisle Rainey" />


<meta name="date" content="2019-10-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="robust-measures-of-location-and-scale.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Concepts and Computation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="literature.html"><a href="literature.html"><i class="fa fa-check"></i><b>3</b> Literature</a></li>
<li class="chapter" data-level="4" data-path="methods.html"><a href="methods.html"><i class="fa fa-check"></i><b>4</b> Methods</a></li>
<li class="chapter" data-level="5" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>5</b> Applications</a><ul>
<li class="chapter" data-level="5.1" data-path="applications.html"><a href="applications.html#example-one"><i class="fa fa-check"></i><b>5.1</b> Example one</a></li>
<li class="chapter" data-level="5.2" data-path="applications.html"><a href="applications.html#example-two"><i class="fa fa-check"></i><b>5.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>6</b> Final Words</a></li>
<li class="chapter" data-level="7" data-path="measures-of-location-and-scale.html"><a href="measures-of-location-and-scale.html"><i class="fa fa-check"></i><b>7</b> Measures of Location and Scale</a></li>
<li class="chapter" data-level="8" data-path="the-average.html"><a href="the-average.html"><i class="fa fa-check"></i><b>8</b> The Average</a><ul>
<li class="chapter" data-level="8.1" data-path="the-average.html"><a href="the-average.html#the-standard-deviation"><i class="fa fa-check"></i><b>8.1</b> The Standard Deviation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="robust-measures-of-location-and-scale.html"><a href="robust-measures-of-location-and-scale.html"><i class="fa fa-check"></i><b>9</b> Robust Measures of Location and Scale</a><ul>
<li class="chapter" data-level="9.1" data-path="robust-measures-of-location-and-scale.html"><a href="robust-measures-of-location-and-scale.html#the-fragility-of-the-average-and-sd"><i class="fa fa-check"></i><b>9.1</b> The Fragility of the Average and SD</a></li>
<li class="chapter" data-level="9.2" data-path="robust-measures-of-location-and-scale.html"><a href="robust-measures-of-location-and-scale.html#robust-alternatives"><i class="fa fa-check"></i><b>9.2</b> Robust Alternatives</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="location-and-scale-in-r.html"><a href="location-and-scale-in-r.html"><i class="fa fa-check"></i><b>10</b> Location and Scale in R</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Concepts and Computation: An Introduction to Political Methodology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="location-and-scale-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Location and Scale in R</h1>
<p>We can easily calculate all these measures of location and scale in R.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="location-and-scale-in-r.html#cb4-1"></a><span class="co"># create variable x = {1, 2, 3, 4, 5}</span></span>
<span id="cb4-2"><a href="location-and-scale-in-r.html#cb4-2"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb4-3"><a href="location-and-scale-in-r.html#cb4-3"></a></span>
<span id="cb4-4"><a href="location-and-scale-in-r.html#cb4-4"></a><span class="co"># compute measures of location and scale</span></span>
<span id="cb4-5"><a href="location-and-scale-in-r.html#cb4-5"></a><span class="kw">mean</span>(x)  <span class="co"># average</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="location-and-scale-in-r.html#cb6-1"></a><span class="kw">sd</span>(x) <span class="co"># SD; see sidenote</span></span></code></pre></div>
<pre><code>## [1] 1.581139</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="location-and-scale-in-r.html#cb8-1"></a><span class="kw">median</span>(x)  <span class="co"># median</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="location-and-scale-in-r.html#cb10-1"></a><span class="kw">IQR</span>(x)  <span class="co"># IQR</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="location-and-scale-in-r.html#cb12-1"></a><span class="kw">mad</span>(x)  <span class="co"># MAD</span></span></code></pre></div>
<pre><code>## [1] 1.4826</code></pre>
<p>The functions above work nicely for computing on whole variables. But in most cases, we are interested in comparing the summaries across groups.</p>
<p>Take the nominate data set for example.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="location-and-scale-in-r.html#cb14-1"></a><span class="co"># load packages</span></span>
<span id="cb14-2"><a href="location-and-scale-in-r.html#cb14-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb14-3"><a href="location-and-scale-in-r.html#cb14-3"></a></span>
<span id="cb14-4"><a href="location-and-scale-in-r.html#cb14-4"></a><span class="co"># load nominate data</span></span>
<span id="cb14-5"><a href="location-and-scale-in-r.html#cb14-5"></a>df &lt;-<span class="st"> </span><span class="kw">read_rds</span>(<span class="st">&quot;data/nominate.rds&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb14-6"><a href="location-and-scale-in-r.html#cb14-6"></a><span class="st">  </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## Observations: 7,080
## Variables: 7
## $ congress &lt;int&gt; 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, …
## $ chamber  &lt;chr&gt; &quot;House&quot;, &quot;House&quot;, &quot;House&quot;, &quot;House&quot;, &quot;House&quot;, &quot;House&quot;, &quot;…
## $ state    &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AK&quot;, &quot;AZ&quot;, &quot;…
## $ district &lt;int&gt; 2, 4, 3, 5, 6, 1, 7, 1, 2, 3, 5, 4, 1, 3, 1, 4, 2, 36, …
## $ party    &lt;fct&gt; Republican, Democrat, Democrat, Democrat, Democrat, Rep…
## $ name     &lt;chr&gt; &quot;DICKINSON, William Louis&quot;, &quot;BEVILL, Tom&quot;, &quot;NICHOLS, Wi…
## $ ideology &lt;dbl&gt; 0.398, -0.213, -0.042, -0.175, -0.060, 0.373, -0.085, 0…</code></pre>
<p>For these data, we might want to know the average ideology for Republicans and Democrats. We could do it the hard way.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="location-and-scale-in-r.html#cb16-1"></a><span class="co"># create a data frame with only republicans</span></span>
<span id="cb16-2"><a href="location-and-scale-in-r.html#cb16-2"></a>rep_df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb16-3"><a href="location-and-scale-in-r.html#cb16-3"></a><span class="st">  </span><span class="kw">filter</span>(party <span class="op">==</span><span class="st"> &quot;Republican&quot;</span>) </span>
<span id="cb16-4"><a href="location-and-scale-in-r.html#cb16-4"></a></span>
<span id="cb16-5"><a href="location-and-scale-in-r.html#cb16-5"></a><span class="co"># compute average</span></span>
<span id="cb16-6"><a href="location-and-scale-in-r.html#cb16-6"></a><span class="kw">mean</span>(rep_df<span class="op">$</span>ideology, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 0.4213385</code></pre>
<p>But this is tedious, especially if we wanted to do it by party and Congress.</p>
<p>To compute these summaries for lots of subsets of the data, we have the <code>group_by()/summarize()</code> workflow.</p>
<p><code>group_by()</code> defines several groups in the data frame. The first argument is the data frame to group (but we’ll <code>%&gt;%</code> it in). The remaining arguments are the grouping variables. You can think if the groups as a footnote at the bottom of the data set that just mentions the variables that define the groups of interest. Whenever we act (in the wrangling sense) on the data set and the action makes sense in the context of groups, the action will happen by group.</p>
<p>After grouping, we use <code>summarize()</code> to create summaries for each group. The first argument is the data frame to summarize (but we’ll <code>%&gt;%</code> it in). The remaining arguments are the summarizes to compute. The names of the remaining arguments become variables in the resulting data frame.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="location-and-scale-in-r.html#cb18-1"></a>smry_df &lt;-<span class="st"> </span>df <span class="op">%&gt;%</span></span>
<span id="cb18-2"><a href="location-and-scale-in-r.html#cb18-2"></a><span class="st">  </span><span class="co"># group by party and congress</span></span>
<span id="cb18-3"><a href="location-and-scale-in-r.html#cb18-3"></a><span class="st">  </span><span class="kw">group_by</span>(party, congress) <span class="op">%&gt;%</span></span>
<span id="cb18-4"><a href="location-and-scale-in-r.html#cb18-4"></a><span class="st">  </span><span class="co"># compute all of our measures of location and scale</span></span>
<span id="cb18-5"><a href="location-and-scale-in-r.html#cb18-5"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">average =</span> <span class="kw">mean</span>(ideology, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb18-6"><a href="location-and-scale-in-r.html#cb18-6"></a>            <span class="dt">sd =</span> <span class="kw">sd</span>(ideology, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb18-7"><a href="location-and-scale-in-r.html#cb18-7"></a>            <span class="dt">median =</span> <span class="kw">median</span>(ideology, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), </span>
<span id="cb18-8"><a href="location-and-scale-in-r.html#cb18-8"></a>            <span class="dt">iqr =</span> <span class="kw">IQR</span>(ideology, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb18-9"><a href="location-and-scale-in-r.html#cb18-9"></a>            <span class="dt">mad =</span> <span class="kw">mad</span>(ideology, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb18-10"><a href="location-and-scale-in-r.html#cb18-10"></a><span class="st">  </span><span class="co"># quick look at our work</span></span>
<span id="cb18-11"><a href="location-and-scale-in-r.html#cb18-11"></a><span class="st">  </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## Observations: 32
## Variables: 7
## Groups: party [2]
## $ party    &lt;fct&gt; Democrat, Democrat, Democrat, Democrat, Democrat, Democ…
## $ congress &lt;int&gt; 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, …
## $ average  &lt;dbl&gt; -0.3092901, -0.3130075, -0.3142407, -0.3333065, -0.3615…
## $ sd       &lt;dbl&gt; 0.1653092, 0.1664293, 0.1658089, 0.1609726, 0.1524251, …
## $ median   &lt;dbl&gt; -0.3200, -0.3200, -0.3200, -0.3360, -0.3815, -0.3835, -…
## $ iqr      &lt;dbl&gt; 0.22750, 0.22600, 0.23025, 0.24000, 0.20550, 0.17850, 0…
## $ mad      &lt;dbl&gt; 0.1675338, 0.1719816, 0.1690164, 0.1793946, 0.1490013, …</code></pre>
<p>We can plot this measures to get a sense of how they change over time.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="location-and-scale-in-r.html#cb20-1"></a><span class="co"># wrangle the data for plotting</span></span>
<span id="cb20-2"><a href="location-and-scale-in-r.html#cb20-2"></a>gg_df &lt;-<span class="st"> </span>smry_df <span class="op">%&gt;%</span></span>
<span id="cb20-3"><a href="location-and-scale-in-r.html#cb20-3"></a><span class="st">  </span><span class="kw">pivot_longer</span>(average<span class="op">:</span>mad, <span class="dt">names_to =</span> <span class="st">&quot;measure&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb20-4"><a href="location-and-scale-in-r.html#cb20-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">measure_of =</span> <span class="kw">ifelse</span>(measure <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;average&quot;</span>, <span class="st">&quot;median&quot;</span>), <span class="st">&quot;location&quot;</span>, <span class="st">&quot;scale&quot;</span>)) <span class="op">%&gt;%</span></span>
<span id="cb20-5"><a href="location-and-scale-in-r.html#cb20-5"></a><span class="st">  </span><span class="kw">glimpse</span>()</span></code></pre></div>
<pre><code>## Observations: 160
## Variables: 5
## Groups: party [2]
## $ party      &lt;fct&gt; Democrat, Democrat, Democrat, Democrat, Democrat, Dem…
## $ congress   &lt;int&gt; 100, 100, 100, 100, 100, 101, 101, 101, 101, 101, 102…
## $ measure    &lt;chr&gt; &quot;average&quot;, &quot;sd&quot;, &quot;median&quot;, &quot;iqr&quot;, &quot;mad&quot;, &quot;average&quot;, &quot;…
## $ value      &lt;dbl&gt; -0.3092901, 0.1653092, -0.3200000, 0.2275000, 0.16753…
## $ measure_of &lt;chr&gt; &quot;location&quot;, &quot;scale&quot;, &quot;location&quot;, &quot;scale&quot;, &quot;scale&quot;, &quot;l…</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="location-and-scale-in-r.html#cb22-1"></a><span class="co"># plot the measures of location and scale</span></span>
<span id="cb22-2"><a href="location-and-scale-in-r.html#cb22-2"></a><span class="kw">ggplot</span>(gg_df, <span class="kw">aes</span>(<span class="dt">x =</span> congress, <span class="dt">y =</span> value, <span class="dt">color =</span> measure)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb22-3"><a href="location-and-scale-in-r.html#cb22-3"></a><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb22-4"><a href="location-and-scale-in-r.html#cb22-4"></a><span class="st">  </span><span class="kw">facet_grid</span>(<span class="dt">cols =</span> <span class="kw">vars</span>(party), <span class="dt">rows =</span> <span class="kw">vars</span>(measure_of), <span class="dt">scales =</span> <span class="st">&quot;free_y&quot;</span>)</span></code></pre></div>
<p><img src="concepts-and-computation_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="robust-measures-of-location-and-scale.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["concepts-and-computation.pdf", "concepts-and-computation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
